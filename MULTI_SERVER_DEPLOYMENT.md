# ğŸŒ DDoS ë°©ì–´ ì‹œìŠ¤í…œ - ë‹¤ì¤‘ ì„œë²„ ë°°í¬ ê°€ì´ë“œ

## ğŸ“Š ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ì¤‘ì•™ DDoS ë°©ì–´ ëŒ€ì‹œë³´ë“œ                        â”‚
â”‚              https://ddos.neuralgrid.kr                      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  ì„œë²„ A í˜„í™©  â”‚  â”‚  ì„œë²„ B í˜„í™©  â”‚  â”‚  ì„œë²„ C í˜„í™©  â”‚      â”‚
â”‚  â”‚  â€¢ íŠ¸ë˜í”½    â”‚  â”‚  â€¢ íŠ¸ë˜í”½    â”‚  â”‚  â€¢ íŠ¸ë˜í”½    â”‚      â”‚
â”‚  â”‚  â€¢ ì°¨ë‹¨ IP   â”‚  â”‚  â€¢ ì°¨ë‹¨ IP   â”‚  â”‚  â€¢ ì°¨ë‹¨ IP   â”‚      â”‚
â”‚  â”‚  â€¢ ê³µê²© ê°ì§€  â”‚  â”‚  â€¢ ê³µê²© ê°ì§€  â”‚  â”‚  â€¢ ê³µê²© ê°ì§€  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–²  â–²  â–²
                           â”‚  â”‚  â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚               â”‚               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ì„œë²„ A          â”‚ â”‚  ì„œë²„ B      â”‚ â”‚  ì„œë²„ C      â”‚
    â”‚ 192.168.1.10      â”‚ â”‚ 192.168.1.20 â”‚ â”‚ 192.168.1.30 â”‚
    â”‚                   â”‚ â”‚             â”‚ â”‚             â”‚
    â”‚ [Agent ìŠ¤í¬ë¦½íŠ¸]   â”‚ â”‚ [Agent]     â”‚ â”‚ [Agent]     â”‚
    â”‚   â€¢ Nginx ë¡œê·¸    â”‚ â”‚  â€¢ ë¡œê·¸     â”‚ â”‚  â€¢ ë¡œê·¸     â”‚
    â”‚   â€¢ Fail2ban      â”‚ â”‚  â€¢ í†µê³„     â”‚ â”‚  â€¢ í†µê³„     â”‚
    â”‚   â€¢ ì‹œìŠ¤í…œ ìƒíƒœ    â”‚ â”‚  â€¢ ìƒíƒœ     â”‚ â”‚  â€¢ ìƒíƒœ     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ë°©ë²• 1: SaaS í˜•íƒœ (ì¶”ì²œ) - ì¤‘ì•™ ì§‘ì¤‘ì‹

### 1ï¸âƒ£ ì¤‘ì•™ ì„œë²„ API í™•ì¥

#### A. ë‹¤ì¤‘ ì„œë²„ ì§€ì› API ì¶”ê°€

**íŒŒì¼**: `ddos-defense-server.js` ì— ì¶”ê°€

```javascript
// ì„œë²„ ë“±ë¡ ë° ë°ì´í„° ìˆ˜ì‹  API
const servers = new Map(); // ì„œë²„ ID -> ë°ì´í„° ì €ì¥

// ì„œë²„ ë“±ë¡
app.post('/api/server/register', (req, res) => {
    const { serverId, serverName, serverIp } = req.body;
    
    servers.set(serverId, {
        id: serverId,
        name: serverName,
        ip: serverIp,
        lastSeen: new Date(),
        status: 'online'
    });
    
    res.json({ success: true, message: 'Server registered' });
});

// ì„œë²„ ë°ì´í„° ìˆ˜ì‹ 
app.post('/api/server/:serverId/stats', (req, res) => {
    const { serverId } = req.params;
    const { traffic, blockedIPs, systemStatus } = req.body;
    
    // ì„œë²„ë³„ ë°ì´í„° ì €ì¥
    if (!servers.has(serverId)) {
        return res.status(404).json({ error: 'Server not registered' });
    }
    
    const server = servers.get(serverId);
    server.traffic = traffic;
    server.blockedIPs = blockedIPs;
    server.systemStatus = systemStatus;
    server.lastSeen = new Date();
    
    servers.set(serverId, server);
    
    res.json({ success: true });
});

// ì „ì²´ ì„œë²„ ìƒíƒœ ì¡°íšŒ
app.get('/api/servers', (req, res) => {
    const serverList = Array.from(servers.values()).map(server => ({
        ...server,
        isOnline: (new Date() - server.lastSeen) < 60000 // 1ë¶„ ì´ë‚´
    }));
    
    res.json(serverList);
});

// íŠ¹ì • ì„œë²„ ìƒì„¸ ì •ë³´
app.get('/api/server/:serverId', (req, res) => {
    const { serverId } = req.params;
    
    if (!servers.has(serverId)) {
        return res.status(404).json({ error: 'Server not found' });
    }
    
    res.json(servers.get(serverId));
});
```

---

### 2ï¸âƒ£ ê° ì„œë²„ì— Agent ìŠ¤í¬ë¦½íŠ¸ ë°°í¬

#### B. Agent ìŠ¤í¬ë¦½íŠ¸ ìƒì„±

**íŒŒì¼**: `ddos-agent.sh`

```bash
#!/bin/bash

# ============================================
# DDoS ë°©ì–´ Agent ìŠ¤í¬ë¦½íŠ¸
# ============================================

# ì„¤ì •
CENTRAL_SERVER="https://ddos.neuralgrid.kr"
SERVER_ID="server-$(hostname)"
SERVER_NAME="$(hostname)"
SERVER_IP="$(hostname -I | awk '{print $1}')"

# ìƒ‰ìƒ ì½”ë“œ
GREEN='\033[0;32m'
BLUE='\033[0;34m'
RED='\033[0;31m'
NC='\033[0m'

echo -e "${BLUE}==================================${NC}"
echo -e "${BLUE}  DDoS ë°©ì–´ Agent ì‹œì‘${NC}"
echo -e "${BLUE}==================================${NC}"

# ì„œë²„ ë“±ë¡
register_server() {
    echo -e "${GREEN}[1/3] ì„œë²„ ë“±ë¡ ì¤‘...${NC}"
    
    curl -s -X POST "$CENTRAL_SERVER/api/server/register" \
        -H "Content-Type: application/json" \
        -d "{
            \"serverId\": \"$SERVER_ID\",
            \"serverName\": \"$SERVER_NAME\",
            \"serverIp\": \"$SERVER_IP\"
        }"
    
    echo -e "${GREEN}âœ… ì„œë²„ ë“±ë¡ ì™„ë£Œ${NC}"
}

# íŠ¸ë˜í”½ í†µê³„ ìˆ˜ì§‘
get_traffic_stats() {
    # ìµœê·¼ 1ë¶„ê°„ Nginx ë¡œê·¸ ë¶„ì„
    TOTAL_REQUESTS=$(tail -1000 /var/log/nginx/access.log 2>/dev/null | wc -l)
    REQUESTS_PER_SEC=$((TOTAL_REQUESTS / 60))
    
    # Rate limiting ì°¨ë‹¨ ìˆ˜
    BLOCKED=$(tail -1000 /var/log/nginx/error.log 2>/dev/null | grep -c "limiting requests")
    
    echo "{\"totalRequests\": $TOTAL_REQUESTS, \"requestsPerSecond\": $REQUESTS_PER_SEC, \"blockedTraffic\": $BLOCKED, \"normalTraffic\": $((TOTAL_REQUESTS - BLOCKED))}"
}

# Fail2ban ì°¨ë‹¨ IP ìˆ˜ì§‘
get_blocked_ips() {
    BLOCKED_IPS=$(sudo fail2ban-client status sshd 2>/dev/null | grep "Currently banned" | awk '{print $4}')
    
    echo "{\"count\": ${BLOCKED_IPS:-0}}"
}

# ì‹œìŠ¤í…œ ìƒíƒœ ìˆ˜ì§‘
get_system_status() {
    LOAD=$(cat /proc/loadavg | awk '{print $1}')
    MEMORY=$(free | grep Mem | awk '{printf "%.2f", ($3/$2) * 100}')
    UPTIME=$(uptime -p)
    
    echo "{\"load\": $LOAD, \"memory\": $MEMORY, \"uptime\": \"$UPTIME\", \"status\": \"normal\"}"
}

# ë°ì´í„° ì „ì†¡
send_stats() {
    echo -e "${GREEN}[2/3] ë°ì´í„° ìˆ˜ì§‘ ì¤‘...${NC}"
    
    TRAFFIC=$(get_traffic_stats)
    BLOCKED_IPS=$(get_blocked_ips)
    SYSTEM_STATUS=$(get_system_status)
    
    echo -e "${GREEN}[3/3] ì¤‘ì•™ ì„œë²„ë¡œ ì „ì†¡ ì¤‘...${NC}"
    
    RESPONSE=$(curl -s -X POST "$CENTRAL_SERVER/api/server/$SERVER_ID/stats" \
        -H "Content-Type: application/json" \
        -d "{
            \"traffic\": $TRAFFIC,
            \"blockedIPs\": $BLOCKED_IPS,
            \"systemStatus\": $SYSTEM_STATUS
        }")
    
    if echo "$RESPONSE" | grep -q '"success":true'; then
        echo -e "${GREEN}âœ… ë°ì´í„° ì „ì†¡ ì„±ê³µ${NC}"
    else
        echo -e "${RED}âŒ ë°ì´í„° ì „ì†¡ ì‹¤íŒ¨${NC}"
    fi
}

# ì„œë²„ ë“±ë¡ (ìµœì´ˆ 1íšŒ)
register_server

# ë¬´í•œ ë£¨í”„ë¡œ ë°ì´í„° ì „ì†¡ (30ì´ˆë§ˆë‹¤)
while true; do
    send_stats
    echo -e "${BLUE}ë‹¤ìŒ ì „ì†¡ê¹Œì§€ 30ì´ˆ ëŒ€ê¸°...${NC}"
    sleep 30
done
```

---

### 3ï¸âƒ£ Agent ë°°í¬ ë° ì‹¤í–‰

#### C. ê° ì„œë²„ì— ì„¤ì¹˜

```bash
# 1. Agent ìŠ¤í¬ë¦½íŠ¸ ë‹¤ìš´ë¡œë“œ
curl -o /usr/local/bin/ddos-agent.sh https://ddos.neuralgrid.kr/scripts/ddos-agent.sh
chmod +x /usr/local/bin/ddos-agent.sh

# 2. Systemd ì„œë¹„ìŠ¤ ìƒì„±
cat > /etc/systemd/system/ddos-agent.service << 'EOF'
[Unit]
Description=DDoS Defense Agent
After=network.target

[Service]
Type=simple
User=root
ExecStart=/usr/local/bin/ddos-agent.sh
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# 3. ì„œë¹„ìŠ¤ ì‹œì‘
systemctl daemon-reload
systemctl enable ddos-agent
systemctl start ddos-agent

# 4. ìƒíƒœ í™•ì¸
systemctl status ddos-agent
```

---

### 4ï¸âƒ£ í†µí•© ëŒ€ì‹œë³´ë“œ UI ìˆ˜ì •

#### D. ë‹¤ì¤‘ ì„œë²„ í‘œì‹œ ëŒ€ì‹œë³´ë“œ

**íŒŒì¼**: `ddos-dashboard-multi.html`

```html
<div class="server-grid">
    <h2>ğŸ–¥ï¸ ì„œë²„ í˜„í™©</h2>
    <div id="servers-container">
        <!-- ì„œë²„ë³„ ì¹´ë“œê°€ ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
    </div>
</div>

<script>
async function updateServers() {
    try {
        const servers = await fetch('/api/servers').then(r => r.json());
        
        const container = document.getElementById('servers-container');
        container.innerHTML = servers.map(server => `
            <div class="server-card ${server.isOnline ? 'online' : 'offline'}">
                <h3>${server.name}</h3>
                <p>IP: ${server.ip}</p>
                <p>ìƒíƒœ: ${server.isOnline ? 'ğŸŸ¢ ì˜¨ë¼ì¸' : 'ğŸ”´ ì˜¤í”„ë¼ì¸'}</p>
                <p>íŠ¸ë˜í”½: ${server.traffic?.requestsPerSecond || 0} req/s</p>
                <p>ì°¨ë‹¨ IP: ${server.blockedIPs?.count || 0}ê°œ</p>
                <p>ë¶€í•˜: ${server.systemStatus?.load || 0}</p>
                <button onclick="viewServer('${server.id}')">ìƒì„¸ë³´ê¸°</button>
            </div>
        `).join('');
    } catch (error) {
        console.error('ì„œë²„ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
    }
}

// 1ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸
setInterval(updateServers, 1000);
updateServers();
</script>

<style>
.server-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
}

.server-card {
    background: var(--bg-card);
    padding: 20px;
    border-radius: 8px;
    border: 2px solid var(--border);
}

.server-card.online {
    border-color: var(--success);
}

.server-card.offline {
    border-color: var(--danger);
    opacity: 0.6;
}
</style>
```

---

## ğŸ¯ ë°©ë²• 2: ì—ì´ì „íŠ¸ ì„¤ì¹˜ ë°©ì‹ (ê²½ëŸ‰)

### íŠ¹ì§•
- ê° ì„œë²„ì— ê²½ëŸ‰ ìŠ¤í¬ë¦½íŠ¸ë§Œ ì„¤ì¹˜
- Cronìœ¼ë¡œ ì£¼ê¸°ì ìœ¼ë¡œ ë°ì´í„° ì „ì†¡
- ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ìµœì†Œ ì‚¬ìš©

### ì„¤ì¹˜ ë°©ë²•

```bash
# 1. ê²½ëŸ‰ Agent ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
cat > /usr/local/bin/ddos-report.sh << 'EOF'
#!/bin/bash
# ê°„ë‹¨í•œ ë°ì´í„° ìˆ˜ì§‘ ë° ì „ì†¡
STATS=$(curl -s http://localhost/nginx_status)
curl -X POST https://ddos.neuralgrid.kr/api/report \
    -d "server=$(hostname)&stats=$STATS"
EOF

chmod +x /usr/local/bin/ddos-report.sh

# 2. Cron ë“±ë¡ (1ë¶„ë§ˆë‹¤ ì‹¤í–‰)
echo "* * * * * /usr/local/bin/ddos-report.sh" | crontab -
```

---

## ğŸ¯ ë°©ë²• 3: ì™„ì „ ë…ë¦½ ì„¤ì¹˜

### íŠ¹ì§•
- ê° ì„œë²„ì— ì „ì²´ ì‹œìŠ¤í…œ ë³µì‚¬
- ì™„ì „íˆ ë…ë¦½ì ìœ¼ë¡œ ìš´ì˜
- ì„œë²„ ê°„ í†µì‹  ë¶ˆí•„ìš”

### ì„¤ì¹˜ ë°©ë²•

```bash
# ìë™ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸
curl -fsSL https://ddos.neuralgrid.kr/install.sh | bash

# ë˜ëŠ” ìˆ˜ë™ ì„¤ì¹˜
git clone https://github.com/hompystory-coder/azamans.git
cd azamans
./deploy-ddos-nginx.sh
```

---

## ğŸ“Š ë¹„êµí‘œ

| í•­ëª© | SaaS ë°©ì‹ | Agent ë°©ì‹ | ë…ë¦½ ì„¤ì¹˜ |
|------|-----------|-----------|----------|
| **ì„¤ì¹˜ ë‚œì´ë„** | â­â­ | â­ | â­â­â­ |
| **ìœ ì§€ë³´ìˆ˜** | âœ… ì‰¬ì›€ | âœ… ì‰¬ì›€ | âŒ ì–´ë ¤ì›€ |
| **ë¦¬ì†ŒìŠ¤ ì‚¬ìš©** | â­ ìµœì†Œ | â­â­ ì¤‘ê°„ | â­â­â­ ë†’ìŒ |
| **í†µí•© ëª¨ë‹ˆí„°ë§** | âœ… ê°€ëŠ¥ | âœ… ê°€ëŠ¥ | âŒ ë¶ˆê°€ëŠ¥ |
| **ì„œë²„ ë…ë¦½ì„±** | âŒ ì¤‘ì•™ ì˜ì¡´ | âŒ ì¤‘ì•™ ì˜ì¡´ | âœ… ì™„ì „ ë…ë¦½ |
| **í™•ì¥ì„±** | âœ…âœ…âœ… ìš°ìˆ˜ | âœ…âœ… ì¢‹ìŒ | âŒ ë‚˜ì¨ |

---

## ğŸš€ ì¶”ì²œ ì‹œë‚˜ë¦¬ì˜¤

### ğŸ¢ **ì¼€ì´ìŠ¤ 1: ì—¬ëŸ¬ ì„œë²„ë¥¼ í•œ íšŒì‚¬ì—ì„œ ê´€ë¦¬**
ğŸ‘‰ **SaaS ë°©ì‹** ì¶”ì²œ  
- í•œ ëŒ€ì‹œë³´ë“œì—ì„œ ëª¨ë“  ì„œë²„ ëª¨ë‹ˆí„°ë§
- í†µí•© ë³´ê³ ì„œ ìƒì„±
- ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬

### ğŸ›’ **ì¼€ì´ìŠ¤ 2: ê³ ê°ì‚¬ì— ì„œë¹„ìŠ¤ íŒë§¤**
ğŸ‘‰ **Agent ë°©ì‹** ì¶”ì²œ  
- ê³ ê°ì‚¬ ì„œë²„ì— ìµœì†Œ ì„¤ì¹˜
- ì¤‘ì•™ì—ì„œ ëª¨ë‹ˆí„°ë§ ì œê³µ
- SaaS ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸

### ğŸ”’ **ì¼€ì´ìŠ¤ 3: ì™„ì „íˆ ë…ë¦½ì ì¸ í™˜ê²½**
ğŸ‘‰ **ë…ë¦½ ì„¤ì¹˜** ì¶”ì²œ  
- ë³´ì•ˆìƒ ì™¸ë¶€ í†µì‹  ë¶ˆê°€ëŠ¥í•œ í™˜ê²½
- ê° ì„œë²„ê°€ ì™„ì „íˆ ë…ë¦½ì ìœ¼ë¡œ ìš´ì˜
- ì¸í„°ë„· ì—°ê²°ì´ ì—†ëŠ” í™˜ê²½

---

## ğŸ“¦ ë°°í¬ íŒ¨í‚¤ì§€ êµ¬ì„±

```
ddos-defense-package/
â”œâ”€â”€ install.sh              # ìë™ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ ddos-agent.sh          # Agent ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ ddos-defense-server.js # ì¤‘ì•™ ì„œë²„ ì½”ë“œ
â”œâ”€â”€ ddos-dashboard.html    # ëŒ€ì‹œë³´ë“œ
â”œâ”€â”€ README.md              # ì„¤ì¹˜ ê°€ì´ë“œ
â””â”€â”€ configs/
    â”œâ”€â”€ nginx.conf         # Nginx ì„¤ì •
    â”œâ”€â”€ fail2ban.conf      # Fail2ban ì„¤ì •
    â””â”€â”€ systemd.service    # Systemd ì„œë¹„ìŠ¤ íŒŒì¼
```

---

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### API ì¸ì¦
```javascript
// API Key ê¸°ë°˜ ì¸ì¦
app.use('/api/server/*', (req, res, next) => {
    const apiKey = req.headers['x-api-key'];
    
    if (!isValidApiKey(apiKey)) {
        return res.status(401).json({ error: 'Unauthorized' });
    }
    
    next();
});
```

### í†µì‹  ì•”í˜¸í™”
- âœ… HTTPS í•„ìˆ˜
- âœ… API Key ì¸ì¦
- âœ… IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸
- âœ… Rate Limiting

---

## ğŸ’° ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸ (ì„ íƒì‚¬í•­)

### SaaS êµ¬ë… ì„œë¹„ìŠ¤
```
ë¬´ë£Œ í”Œëœ: 1ê°œ ì„œë²„
ë² ì´ì§: $29/ì›” - 5ê°œ ì„œë²„
í”„ë¡œ: $99/ì›” - 20ê°œ ì„œë²„
ì—”í„°í”„ë¼ì´ì¦ˆ: ì»¤ìŠ¤í…€ ê°€ê²©
```

---

**ì´ ê°€ì´ë“œë¡œ ë‹¤ì¤‘ ì„œë²„ DDoS ë°©ì–´ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!** ğŸ‰
