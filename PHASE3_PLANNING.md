# Phase 3: ì„œë²„ ì—ì´ì „íŠ¸ ë° ìƒì„¸ ê´€ë¦¬ - ê°œë°œ ê³„íš

## ğŸ“‹ Phase 3 ê°œìš”

### ëª©í‘œ
1. **ì„œë²„ ì—ì´ì „íŠ¸ ê°œë°œ**: í´ë¼ì´ì–¸íŠ¸ ì„œë²„ì— ì„¤ì¹˜ë˜ì–´ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ë° ë°©ì–´ ìˆ˜í–‰
2. **ìƒì„¸ ê´€ë¦¬ í˜ì´ì§€**: ê° ì„œë²„ë³„ ìƒì„¸ ì •ë³´, ë¡œê·¸, ì„¤ì • ê´€ë¦¬
3. **ì‹¤ì‹œê°„ í†µì‹ **: WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ë°ì´í„° ì „ì†¡
4. **ìë™ ë°©ì–´**: DDoS ê³µê²© íƒì§€ ë° ìë™ ì°¨ë‹¨

---

## ğŸ¯ Phase 3 ì£¼ìš” ê¸°ëŠ¥

### 1. ì„œë²„ ì—ì´ì „íŠ¸ (Agent)
**íŒŒì¼**: `neuralgrid-agent.sh`

#### ê¸°ëŠ¥
- âœ… **ìë™ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸**
  - OS ìë™ ê°ì§€ (CentOS, Ubuntu, Debian)
  - ë°©í™”ë²½ ìë™ ì„¤ì • (iptables/ufw)
  - Systemd ì„œë¹„ìŠ¤ ë“±ë¡
  
- âœ… **ì‹¤ì‹œê°„ ë¡œê·¸ ìˆ˜ì§‘**
  - Nginx/Apache ì•¡ì„¸ìŠ¤ ë¡œê·¸ ëª¨ë‹ˆí„°ë§
  - ê³µê²© íŒ¨í„´ íƒì§€ (DDoS, Brute Force ë“±)
  - ì°¨ë‹¨ëœ IP ê¸°ë¡
  
- âœ… **ìë™ ë°©ì–´ ì‹œìŠ¤í…œ**
  - ì„ê³„ê°’ ê¸°ë°˜ ìë™ IP ì°¨ë‹¨
  - êµ­ê°€ë³„ GeoIP ì°¨ë‹¨
  - ë„ë©”ì¸ ê¸°ë°˜ ì°¨ë‹¨
  
- âœ… **API í†µì‹ **
  - ì¤‘ì•™ ì„œë²„ì™€ í†µì‹  (5ë¶„ ê°„ê²©)
  - í†µê³„ ë°ì´í„° ì „ì†¡
  - ì°¨ë‹¨ ê·œì¹™ ìˆ˜ì‹  ë° ì ìš©

#### ì„¤ì¹˜ ë°©ë²•
```bash
# MyPageì—ì„œ "ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸" ë²„íŠ¼ í´ë¦­ ì‹œ ìƒì„±ë˜ëŠ” ëª…ë ¹ì–´
curl -fsSL https://ddos.neuralgrid.kr/install?key=YOUR_API_KEY | bash
```

---

### 2. ìƒì„¸ ì„œë²„ ê´€ë¦¬ í˜ì´ì§€
**íŒŒì¼**: `ddos-server-detail.html`

#### URL
```
https://ddos.neuralgrid.kr/server-detail.html?id={serverId}
```

#### ë ˆì´ì•„ì›ƒ

##### í—¤ë” ì„¹ì…˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ–¥ï¸ ì„œë²„ ì´ë¦„                        [ìƒíƒœ: ì˜¨ë¼ì¸]  â”‚
â”‚ IP: 192.168.1.100  |  OS: Ubuntu 22.04             â”‚
â”‚ [â† ëª©ë¡ìœ¼ë¡œ]  [ì„¤ì •]  [ì¬ì‹œì‘]  [ì‚­ì œ]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### íƒ­ ë©”ë‰´
```
[ê°œìš”] [ì‹¤ì‹œê°„ ë¡œê·¸] [ì°¨ë‹¨ ê´€ë¦¬] [í†µê³„] [ì„¤ì •]
```

##### ê°œìš” íƒ­
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì˜¤ëŠ˜ ìš”ì²­    â”‚ ì°¨ë‹¨ëœ ìš”ì²­  â”‚ ì°¨ë‹¨ëœ IP    â”‚ CPU ì‚¬ìš©ë¥    â”‚
â”‚ 12,345       â”‚ 234          â”‚ 15           â”‚ 45%          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Š ì‹œê°„ë³„ íŠ¸ë˜í”½ ì°¨íŠ¸
[ì‹¤ì‹œê°„ ë¼ì¸ ì°¨íŠ¸]

ğŸ“ˆ ì°¨ë‹¨ í†µê³„
[ì›í˜• ì°¨íŠ¸: IP/ë„ë©”ì¸/GeoIP ë¹„ìœ¨]
```

##### ì‹¤ì‹œê°„ ë¡œê·¸ íƒ­
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” [ê²€ìƒ‰...]                    [â–¶ ì¼ì‹œì •ì§€] [ìƒˆë¡œê³ ì¹¨] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [2025-12-16 01:00:15] 192.168.1.50 â†’ /api/login    â”‚
â”‚ [2025-12-16 01:00:14] ğŸš« BLOCKED: 45.76.32.11      â”‚
â”‚ [2025-12-16 01:00:13] 192.168.1.23 â†’ /home         â”‚
â”‚ [2025-12-16 01:00:12] ğŸš« BLOCKED: 103.45.22.11    â”‚
â”‚ ...                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### ì°¨ë‹¨ ê´€ë¦¬ íƒ­
```
ğŸš« ì°¨ë‹¨ëœ IP ëª©ë¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IP ì£¼ì†Œ    â”‚ ì°¨ë‹¨ ì‚¬ìœ   â”‚ ì°¨ë‹¨ ì‹œê°â”‚ ë§Œë£Œ       â”‚ ì‘ì—…   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 45.76.32.11â”‚ DDoS ê³µê²©  â”‚ 1ì‹œê°„ ì „ â”‚ ì˜êµ¬       â”‚ [í•´ì œ] â”‚
â”‚ 103.45.2.1 â”‚ ìˆ˜ë™ ì°¨ë‹¨  â”‚ 2ì‹œê°„ ì „ â”‚ 24ì‹œê°„ í›„  â”‚ [í•´ì œ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[+ IP ì¶”ê°€ ì°¨ë‹¨]

ğŸŒ ì°¨ë‹¨ëœ êµ­ê°€
[ëŒ€í•œë¯¼êµ­ ì œì™¸]  [ì¤‘êµ­]  [ëŸ¬ì‹œì•„]  [ë¶í•œ]  [+ êµ­ê°€ ì¶”ê°€]

ğŸ”— ì°¨ë‹¨ëœ ë„ë©”ì¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë„ë©”ì¸             â”‚ ì°¨ë‹¨ ì‹œê°  â”‚ ì‘ì—…   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ malicious.com      â”‚ 3ì‹œê°„ ì „   â”‚ [í•´ì œ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[+ ë„ë©”ì¸ ì¶”ê°€ ì°¨ë‹¨]
```

##### ì„¤ì • íƒ­
```
âš™ï¸ ë°©ì–´ ì„¤ì •

ğŸ“Š ì„ê³„ê°’ ì„¤ì •
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¶„ë‹¹ ìµœëŒ€ ìš”ì²­ ìˆ˜: [100] íšŒ          â”‚
â”‚ IPë‹¹ ë¶„ë‹¹ ìš”ì²­: [20] íšŒ              â”‚
â”‚ ìë™ ì°¨ë‹¨ ì‹œê°„: [60] ë¶„              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”” ì•Œë¦¼ ì„¤ì •
â˜‘ï¸ ê³µê²© íƒì§€ ì‹œ ì´ë©”ì¼ ì•Œë¦¼
â˜‘ï¸ ì°¨ë‹¨ IP 10ê°œ ì´ˆê³¼ ì‹œ ì•Œë¦¼
â˜ ì¼ì¼ ë¦¬í¬íŠ¸ ì´ë©”ì¼

ğŸ” API Key
[XXXXXXXXXXXXXXXXXXXXXXXX] [ì¬ë°œê¸‰]

ğŸ’¾ [ì €ì¥]
```

---

### 3. Backend API ì¶”ê°€

#### ìƒˆ ì—”ë“œí¬ì¸íŠ¸

**ì„œë²„ ìƒì„¸ ì¡°íšŒ**
```
GET /api/server/:serverId/detail
ì‘ë‹µ: {
  server: { id, name, ip, domain, os, status },
  stats: { todayRequests, blockedRequests, blockedIPs, cpu },
  settings: { maxRequestsPerMinute, autoBlockDuration }
}
```

**ì‹¤ì‹œê°„ ë¡œê·¸ ì¡°íšŒ**
```
GET /api/server/:serverId/logs?limit=100
ì‘ë‹µ: {
  logs: [
    { timestamp, ip, path, method, status, blocked }
  ]
}
```

**ì°¨ë‹¨ IP ëª©ë¡**
```
GET /api/server/:serverId/blocked-ips
ì‘ë‹µ: {
  blockedIPs: [
    { ip, reason, blockedAt, expiresAt }
  ]
}
```

**IP ì°¨ë‹¨ ì¶”ê°€**
```
POST /api/server/:serverId/block-ip
Body: { ip, reason, duration }
```

**IP ì°¨ë‹¨ í•´ì œ**
```
DELETE /api/server/:serverId/blocked-ips/:ip
```

**ë„ë©”ì¸ ì°¨ë‹¨**
```
POST /api/server/:serverId/block-domain
Body: { domain, reason }
```

**GeoIP ì°¨ë‹¨**
```
POST /api/server/:serverId/block-geo
Body: { countryCode }
```

**ì„œë²„ ì„¤ì • ì—…ë°ì´íŠ¸**
```
PATCH /api/server/:serverId/settings
Body: { maxRequestsPerMinute, autoBlockDuration, emailAlert }
```

---

### 4. WebSocket ì‹¤ì‹œê°„ í†µì‹ 

**WebSocket ì„œë²„**
```
ws://localhost:3105/ws
```

**ì´ë²¤íŠ¸ íƒ€ì…**
```javascript
// ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸
{
  type: 'new_log',
  data: { serverId, timestamp, ip, path, status }
}

{
  type: 'attack_detected',
  data: { serverId, attackType, sourceIP, severity }
}

{
  type: 'ip_blocked',
  data: { serverId, ip, reason }
}

{
  type: 'stats_update',
  data: { serverId, stats }
}
```

---

## ğŸ”§ ì„œë²„ ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜

### ì„¤ì¹˜ í”Œë¡œìš°
```
1. MyPageì—ì„œ "ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸" ë³µì‚¬
   â†“
2. í´ë¼ì´ì–¸íŠ¸ ì„œë²„ì—ì„œ ì‹¤í–‰
   â†“
3. OS/ë°©í™”ë²½ ìë™ ê°ì§€
   â†“
4. ì—ì´ì „íŠ¸ ì„¤ì¹˜ ë° ì„œë¹„ìŠ¤ ë“±ë¡
   â†“
5. API Keyë¡œ ì¤‘ì•™ ì„œë²„ ì¸ì¦
   â†“
6. ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ì‹œì‘
```

### ì—ì´ì „íŠ¸ êµ¬ì¡°
```bash
/opt/neuralgrid/
â”œâ”€â”€ agent.sh              # ë©”ì¸ ì—ì´ì „íŠ¸ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ config.json           # ì„¤ì • íŒŒì¼ (API Key ë“±)
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ agent.log         # ì—ì´ì „íŠ¸ ë¡œê·¸
â”‚   â””â”€â”€ blocked-ips.log   # ì°¨ë‹¨ ê¸°ë¡
â””â”€â”€ rules/
    â”œâ”€â”€ iptables.rules    # iptables ê·œì¹™
    â””â”€â”€ blocked-ips.txt   # ì°¨ë‹¨ëœ IP ëª©ë¡
```

### Systemd ì„œë¹„ìŠ¤
```ini
[Unit]
Description=NeuralGrid DDoS Protection Agent
After=network.target

[Service]
Type=simple
ExecStart=/opt/neuralgrid/agent.sh
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

---

## ğŸ“Š ë°ì´í„° êµ¬ì¡°

### servers.json (í™•ì¥)
```json
{
  "server_001": {
    "id": "server_001",
    "name": "Web Server 1",
    "userId": "user_001",
    "ip": "192.168.1.100",
    "domain": "example.com",
    "os": "ubuntu",
    "apiKey": "ng_xxx",
    "status": "online",
    "lastSeen": "2025-12-16T01:00:00Z",
    "stats": {
      "todayRequests": 12345,
      "blockedRequests": 234,
      "blockedIPs": 15,
      "cpu": 45,
      "memory": 70
    },
    "settings": {
      "maxRequestsPerMinute": 100,
      "maxRequestsPerIP": 20,
      "autoBlockDuration": 60,
      "emailAlert": true,
      "alertThreshold": 10
    },
    "createdAt": "2025-12-15T00:00:00Z"
  }
}
```

### logs.json (ìƒˆë¡œ ì¶”ê°€)
```json
{
  "server_001": [
    {
      "timestamp": "2025-12-16T01:00:15Z",
      "ip": "192.168.1.50",
      "path": "/api/login",
      "method": "POST",
      "status": 200,
      "blocked": false
    },
    {
      "timestamp": "2025-12-16T01:00:14Z",
      "ip": "45.76.32.11",
      "path": "/admin",
      "method": "GET",
      "status": 403,
      "blocked": true,
      "reason": "DDoS detected"
    }
  ]
}
```

---

## ğŸš€ ê°œë°œ ë‹¨ê³„

### Step 1: ì„œë²„ ì—ì´ì „íŠ¸ ê°œë°œ âœ…
- [ ] `neuralgrid-agent.sh` ì‘ì„±
- [ ] OS ê°ì§€ ë¡œì§
- [ ] ë°©í™”ë²½ ì„¤ì • ë¡œì§
- [ ] ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ë¡œì§
- [ ] API í†µì‹  ë¡œì§

### Step 2: ìƒì„¸ í˜ì´ì§€ ê°œë°œ âœ…
- [ ] `ddos-server-detail.html` ì‘ì„±
- [ ] ê°œìš” íƒ­
- [ ] ì‹¤ì‹œê°„ ë¡œê·¸ íƒ­
- [ ] ì°¨ë‹¨ ê´€ë¦¬ íƒ­
- [ ] ì„¤ì • íƒ­

### Step 3: Backend API ì¶”ê°€ âœ…
- [ ] ì„œë²„ ìƒì„¸ ì¡°íšŒ API
- [ ] ë¡œê·¸ ì¡°íšŒ API
- [ ] ì°¨ë‹¨ IP ê´€ë¦¬ API
- [ ] ì„¤ì • ì—…ë°ì´íŠ¸ API

### Step 4: WebSocket êµ¬í˜„ âœ…
- [ ] WebSocket ì„œë²„ ì¶”ê°€
- [ ] ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ì „ì†¡
- [ ] í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ê´€ë¦¬

### Step 5: í…ŒìŠ¤íŠ¸ ë° ë°°í¬ âœ…
- [ ] ë¡œì»¬ í…ŒìŠ¤íŠ¸
- [ ] í”„ë¡œë•ì…˜ ë°°í¬
- [ ] ë¬¸ì„œí™”

---

## ğŸ“ ì˜ˆìƒ ì‘ì—… ì‹œê°„

- **ì„œë²„ ì—ì´ì „íŠ¸**: 2-3ì‹œê°„
- **ìƒì„¸ í˜ì´ì§€**: 2-3ì‹œê°„
- **Backend API**: 1-2ì‹œê°„
- **WebSocket**: 1ì‹œê°„
- **í…ŒìŠ¤íŠ¸ ë° ë°°í¬**: 1ì‹œê°„

**ì´ ì˜ˆìƒ ì‹œê°„**: 7-10ì‹œê°„

---

**ì‹œì‘ì¼**: 2025-12-16 01:00 KST  
**ëª©í‘œ ì™„ë£Œì¼**: 2025-12-16 10:00 KST
