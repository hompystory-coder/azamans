<!DOCTYPE html>
<html>
<head>
    <title>AI Shorts Voice Features Test</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        h1 { color: #667eea; }
        .test-section { margin: 30px 0; padding: 20px; border: 2px solid #e0e0e0; border-radius: 8px; }
        .success { color: #4CAF50; font-weight: bold; }
        .error { color: #f44336; font-weight: bold; }
        button { padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; margin: 5px; }
        button:hover { background: #5568d3; }
        .voice-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; margin-top: 15px; }
        .voice-item { padding: 10px; background: #f9f9f9; border-radius: 6px; text-align: center; }
        .voice-item button { width: 100%; padding: 8px; font-size: 0.9rem; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤ AI ì‡¼ì¸  ìŒì„± ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h1>
        
        <div class="test-section">
            <h2>âœ… êµ¬í˜„ëœ ê¸°ëŠ¥</h2>
            <ul>
                <li><strong>16ê°€ì§€ ìŒì„± ì˜µì…˜:</strong> ì—¬ì„± 9ì¢…, ë‚¨ì„± 8ì¢…, íŠ¹ìˆ˜ 4ì¢…</li>
                <li><strong>ì‹¤ì‹œê°„ ìë™ ì €ì¥:</strong> ëª¨ë“  ì„¤ì •ê°’ LocalStorage ì €ì¥ (500ms ë””ë°”ìš´ì‹±)</li>
                <li><strong>ìŒì„± ìƒ˜í”Œ ë¯¸ë¦¬ë“£ê¸°:</strong> API ê¸°ë°˜ ì‹¤ì‹œê°„ TTS ìƒì„± ë° ì¬ìƒ</li>
                <li><strong>ì„¤ì • ë³µì›:</strong> í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ìë™ ë³µì›</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>ğŸµ 16ê°€ì§€ ìŒì„± ìƒ˜í”Œ í…ŒìŠ¤íŠ¸</h2>
            <div class="voice-list" id="voice-list"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ’¾ ìë™ ì €ì¥ í…ŒìŠ¤íŠ¸</h2>
            <p>ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ LocalStorageì— ì„¤ì •ì´ ìë™ ì €ì¥ë©ë‹ˆë‹¤.</p>
            <button onclick="testAutoSave()">ìë™ ì €ì¥ í…ŒìŠ¤íŠ¸</button>
            <button onclick="checkSavedSettings()">ì €ì¥ëœ ì„¤ì • í™•ì¸</button>
            <button onclick="clearSettings()">ì„¤ì • ì´ˆê¸°í™”</button>
            <div id="auto-save-result" style="margin-top: 15px;"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>
            <div id="test-results"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ”— ì£¼ìš” ë§í¬</h2>
            <ul>
                <li><a href="https://ai-shorts.neuralgrid.kr/advanced-shorts.html" target="_blank">ê³ ê¸‰ ì„¤ì • í˜ì´ì§€</a></li>
                <li><a href="https://ai-shorts.neuralgrid.kr/character-shorts.html" target="_blank">ìºë¦­í„° ì‡¼ì¸  í˜ì´ì§€</a></li>
            </ul>
        </div>
    </div>

    <script>
        const voices = [
            // ì—¬ì„± ìŒì„± - ì¼ë°˜
            { id: 'female-friendly', name: 'ì¹œê·¼í•œ ì—¬ì„±', category: 'ì—¬ì„± ì¼ë°˜' },
            { id: 'female-energetic', name: 'ë°œë„í•œ ì—¬ì„±', category: 'ì—¬ì„± ì¼ë°˜' },
            { id: 'female-professional', name: 'ì „ë¬¸ì ì¸ ì—¬ì„±', category: 'ì—¬ì„± ì¼ë°˜' },
            { id: 'female-soft', name: 'ë¶€ë“œëŸ¬ìš´ ì—¬ì„±', category: 'ì—¬ì„± ì¼ë°˜' },
            { id: 'female-mature', name: 'ì„±ìˆ™í•œ ì—¬ì„±', category: 'ì—¬ì„± ì¼ë°˜' },
            { id: 'female-young', name: 'ê·€ì—¬ìš´ ì—¬ì„±', category: 'ì—¬ì„± ì¼ë°˜' },
            
            // ì—¬ì„± ìŒì„± - íŠ¹ìˆ˜
            { id: 'female-news', name: 'ë‰´ìŠ¤ ì•µì»¤ ì—¬ì„±', category: 'ì—¬ì„± íŠ¹ìˆ˜' },
            { id: 'female-drama', name: 'ë“œë¼ë§ˆí‹± ì—¬ì„±', category: 'ì—¬ì„± íŠ¹ìˆ˜' },
            { id: 'female-whisper', name: 'ì†ì‚­ì„ ì—¬ì„±', category: 'ì—¬ì„± íŠ¹ìˆ˜' },
            
            // ë‚¨ì„± ìŒì„± - ì¼ë°˜
            { id: 'male-professional', name: 'ì „ë¬¸ì ì¸ ë‚¨ì„±', category: 'ë‚¨ì„± ì¼ë°˜' },
            { id: 'male-calm', name: 'ì°¨ë¶„í•œ ë‚¨ì„±', category: 'ë‚¨ì„± ì¼ë°˜' },
            { id: 'male-energetic', name: 'í™œê¸°ì°¬ ë‚¨ì„±', category: 'ë‚¨ì„± ì¼ë°˜' },
            { id: 'male-deep', name: 'ì¤‘ì €ìŒ ë‚¨ì„±', category: 'ë‚¨ì„± ì¼ë°˜' },
            { id: 'male-young', name: 'ì Šì€ ë‚¨ì„±', category: 'ë‚¨ì„± ì¼ë°˜' },
            { id: 'male-narration', name: 'ë‚´ë ˆì´ì…˜ ë‚¨ì„±', category: 'ë‚¨ì„± ì¼ë°˜' },
            
            // ë‚¨ì„± ìŒì„± - íŠ¹ìˆ˜
            { id: 'male-powerful', name: 'íŒŒì›Œí’€ ë‚¨ì„±', category: 'ë‚¨ì„± íŠ¹ìˆ˜' },
            { id: 'male-documentary', name: 'ë‹¤íë©˜í„°ë¦¬ ë‚¨ì„±', category: 'ë‚¨ì„± íŠ¹ìˆ˜' },
            
            // íŠ¹ìˆ˜ ìŒì„±
            { id: 'child-friendly', name: 'ì•„ë™ìš©', category: 'íŠ¹ìˆ˜' },
            { id: 'elderly-wise', name: 'ì–´ë¥´ì‹ ', category: 'íŠ¹ìˆ˜' },
            { id: 'robot-ai', name: 'AI ë¡œë´‡', category: 'íŠ¹ìˆ˜' },
            { id: 'asmr-relaxing', name: 'ASMR íë§', category: 'íŠ¹ìˆ˜' }
        ];

        // ìŒì„± ëª©ë¡ í‘œì‹œ
        const voiceList = document.getElementById('voice-list');
        voices.forEach((voice, index) => {
            const item = document.createElement('div');
            item.className = 'voice-item';
            item.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 5px;">${index + 1}. ${voice.name}</div>
                <div style="font-size: 0.85rem; color: #666; margin-bottom: 8px;">${voice.category}</div>
                <button onclick="playVoice('${voice.id}')">â–¶ï¸ ì¬ìƒ</button>
            `;
            voiceList.appendChild(item);
        });

        // ìŒì„± ì¬ìƒ
        async function playVoice(voiceId) {
            try {
                const audio = new Audio(`/api/advanced/voice/sample/${voiceId}`);
                await audio.play();
                updateResults(`âœ… ${voiceId} ì¬ìƒ ì„±ê³µ`);
            } catch (error) {
                updateResults(`âŒ ${voiceId} ì¬ìƒ ì‹¤íŒ¨: ${error.message}`);
            }
        }

        // ìë™ ì €ì¥ í…ŒìŠ¤íŠ¸
        function testAutoSave() {
            const testSettings = {
                voice: 'female-drama',
                voiceSpeed: 1.2,
                voicePitch: 2,
                font: 'NanumGothicBold',
                subtitleSize: 80,
                subtitlePosition: 450,
                subtitleBorder: 8,
                prompt: 'í…ŒìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸ ë‚´ìš©',
                videoTitle: 'í…ŒìŠ¤íŠ¸ ë¹„ë””ì˜¤ ì œëª©',
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('ai_shorts_settings', JSON.stringify(testSettings));
            document.getElementById('auto-save-result').innerHTML = `
                <div class="success">âœ… ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!</div>
                <pre>${JSON.stringify(testSettings, null, 2)}</pre>
            `;
        }

        // ì €ì¥ëœ ì„¤ì • í™•ì¸
        function checkSavedSettings() {
            const saved = localStorage.getItem('ai_shorts_settings');
            if (saved) {
                const settings = JSON.parse(saved);
                document.getElementById('auto-save-result').innerHTML = `
                    <div class="success">âœ… ì €ì¥ëœ ì„¤ì •ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤!</div>
                    <pre>${JSON.stringify(settings, null, 2)}</pre>
                `;
            } else {
                document.getElementById('auto-save-result').innerHTML = `
                    <div class="error">âŒ ì €ì¥ëœ ì„¤ì •ì´ ì—†ìŠµë‹ˆë‹¤.</div>
                `;
            }
        }

        // ì„¤ì • ì´ˆê¸°í™”
        function clearSettings() {
            localStorage.removeItem('ai_shorts_settings');
            document.getElementById('auto-save-result').innerHTML = `
                <div class="success">âœ… ì„¤ì •ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
            `;
        }

        // ê²°ê³¼ ì—…ë°ì´íŠ¸
        function updateResults(message) {
            const results = document.getElementById('test-results');
            const time = new Date().toLocaleTimeString();
            results.innerHTML = `<div>[${time}] ${message}</div>` + results.innerHTML;
        }

        // ì´ˆê¸° í…ŒìŠ¤íŠ¸
        window.onload = async function() {
            updateResults('ğŸš€ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            updateResults(`ğŸ“Š ì´ ${voices.length}ê°œ ìŒì„± ì˜µì…˜ í™•ì¸`);
            
            // API ì—°ê²° í…ŒìŠ¤íŠ¸
            try {
                const response = await fetch('/api/advanced/voice/sample/female-friendly');
                if (response.ok) {
                    updateResults('âœ… API ì—°ê²° ì„±ê³µ');
                } else {
                    updateResults('âŒ API ì—°ê²° ì‹¤íŒ¨');
                }
            } catch (error) {
                updateResults(`âŒ API ì˜¤ë¥˜: ${error.message}`);
            }
        };
    </script>
</body>
</html>
